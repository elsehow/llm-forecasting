<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conditional Forecasting</title>
  <style>
    /* ========================================
       THEME: Emacs Leuven
       To swap themes, change these variables
       ======================================== */
    :root {
      /* Emacs Leuven Theme */
      --bg-primary: #FFFFFF;
      --bg-secondary: #F0F0F0;
      --bg-tertiary: #E0E0E0;
      --text-primary: #333333;
      --text-secondary: #7F7F7F;
      --text-muted: #999999;
      --accent-primary: #0000FF;
      --accent-secondary: #6434A3;
      --accent-gradient: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      --success: #008B00;
      --warning: #FF8C00;
      --error: #FF0000;
      --border: #C0C0C0;
      --node-ultimate-bg: var(--accent-gradient);
      --node-ultimate-text: #ffffff;
      --node-subq-bg: #E0F0FF;
      --node-subq-border: #99CCFF;
      --node-subq-text: #0000FF;
      --node-signal-bg: #DFFFDF;
      --node-signal-border: #99DD99;
      --node-signal-text: #008B00;
      --scenario-gold: #B8860B;
      --scenario-gold-bg: #FFF8DC;
      /* Scenario-specific colors */
      --scenario-ai: #3465A4;
      --scenario-ai-bg: #E8F0FA;
      --scenario-ai-border: #99BBDD;
      --scenario-green: #008B00;
      --scenario-green-bg: #DFFFDF;
      --scenario-green-border: #99DD99;
      --scenario-frag: #CE5C00;
      --scenario-frag-bg: #FFF0E0;
      --scenario-frag-border: #FFCC99;
      --scenario-steady: #6434A3;
      --scenario-steady-bg: #F0E8FA;
      --scenario-steady-border: #C4AADD;
    }

    /* ========================================
       ALTERNATE THEME: Dark Mode
       Uncomment to use
       ========================================
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #1a1a2e;
      --bg-tertiary: #2a2a3e;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --text-muted: #666666;
      --accent-primary: #667eea;
      --accent-secondary: #764ba2;
      --accent-gradient: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      --success: #4ade80;
      --warning: #f0c040;
      --error: #f87171;
      --border: #333333;
      --node-ultimate-bg: var(--accent-gradient);
      --node-ultimate-text: #ffffff;
      --node-subq-bg: #1a3a5c;
      --node-subq-border: #2a5a8c;
      --node-subq-text: #8cb4d8;
      --node-signal-bg: #1a4a3a;
      --node-signal-border: #2a7a5a;
      --node-signal-text: #8cd8b4;
      --scenario-gold: #f0c040;
      --scenario-gold-bg: #2a2a1e;
    }
    */

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }

    section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 4rem 2rem;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    h1 {
      font-size: 3rem;
      font-weight: 300;
      text-align: center;
      margin-bottom: 1rem;
    }

    h2 {
      font-size: 1.8rem;
      font-weight: 400;
      text-align: center;
      margin-bottom: 2rem;
      color: var(--text-secondary);
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--text-primary);
      text-align: center;
    }

    /* Hero */
    #hero {
      background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    }

    #hero h1 {
      font-size: 3.5rem;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Sticky question header */
    .question-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 0.75rem 2rem;
      z-index: 100;
      opacity: 0;
      transform: translateY(-100%);
      transition: all 0.3s ease;
    }

    .question-header.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .question-header-text {
      font-size: 1rem;
      color: var(--text-secondary);
      text-align: center;
    }

    .question-header-text strong {
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Tree visualization */
    .tree-container {
      position: relative;
      width: 100%;
      max-width: 900px;
      min-height: 400px;
      margin: 2rem 0;
    }

    .tree-svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .tree-svg line {
      stroke: var(--border);
      stroke-width: 2;
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      transition: stroke-dashoffset 0.8s ease;
    }

    .tree-svg line.visible {
      stroke-dashoffset: 0;
    }

    .tree-nodes {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .node {
      position: absolute;
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-size: 0.9rem;
      text-align: center;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.5s ease;
      white-space: nowrap;
    }

    .node.visible {
      opacity: 1;
      transform: scale(1);
    }

    .node.ultimate {
      background: var(--node-ultimate-bg);
      color: var(--node-ultimate-text);
      font-weight: 500;
    }

    .node.sub-q {
      background: var(--node-subq-bg);
      border: 1px solid var(--node-subq-border);
      color: var(--node-subq-text);
    }

    .node.signal {
      background: var(--node-signal-bg);
      border: 1px solid var(--node-signal-border);
      color: var(--node-signal-text);
    }

    .node.highlight {
      box-shadow: 0 0 20px rgba(0, 122, 204, 0.3);
    }

    .node.scenario-highlight {
      box-shadow: 0 0 0 3px var(--scenario-gold);
      z-index: 10;
    }

    /* Scenario labels */
    .scenario-label {
      position: absolute;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      background: var(--scenario-gold-bg);
      color: var(--scenario-gold);
      border: 2px solid var(--scenario-gold);
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.5s ease;
      white-space: nowrap;
    }

    .scenario-label.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* Scenario-specific colors for signals and labels */
    .node.signal.scenario-ai {
      background: var(--scenario-ai-bg);
      border-color: var(--scenario-ai-border);
      color: var(--scenario-ai);
    }
    .node.signal.scenario-green {
      background: var(--scenario-green-bg);
      border-color: var(--scenario-green-border);
      color: var(--scenario-green);
    }
    .node.signal.scenario-frag {
      background: var(--scenario-frag-bg);
      border-color: var(--scenario-frag-border);
      color: var(--scenario-frag);
    }
    .node.signal.scenario-steady {
      background: var(--scenario-steady-bg);
      border-color: var(--scenario-steady-border);
      color: var(--scenario-steady);
    }

    .scenario-label.scenario-ai {
      background: var(--scenario-ai-bg);
      border-color: var(--scenario-ai);
      color: var(--scenario-ai);
    }
    .scenario-label.scenario-green {
      background: var(--scenario-green-bg);
      border-color: var(--scenario-green);
      color: var(--scenario-green);
    }
    .scenario-label.scenario-frag {
      background: var(--scenario-frag-bg);
      border-color: var(--scenario-frag);
      color: var(--scenario-frag);
    }
    .scenario-label.scenario-steady {
      background: var(--scenario-steady-bg);
      border-color: var(--scenario-steady);
      color: var(--scenario-steady);
    }

    /* Outcomes section */
    .outcomes-container {
      max-width: 700px;
      width: 100%;
    }

    .outcome-row {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 1rem;
      margin-bottom: 0.75rem;
      background: var(--bg-secondary);
      border-radius: 12px;
      border: 1px solid var(--border);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.5s ease;
    }

    .outcome-row.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .outcome-scenario {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      background: var(--scenario-gold-bg);
      color: var(--scenario-gold);
      border: 1px solid var(--scenario-gold);
      min-width: 200px;
    }

    .outcome-prob {
      font-size: 0.8rem;
      color: var(--accent-primary);
      font-weight: 600;
    }

    .outcome-arrow {
      color: var(--text-muted);
      font-size: 1.5rem;
    }

    .outcome-value {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--success);
    }

    /* Calculation */
    .calculation-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 2rem;
      max-width: 600px;
      width: 100%;
    }

    .calc-row {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--bg-tertiary);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease;
    }

    .calc-row.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .calc-row.total {
      border-top: 2px solid var(--accent-primary);
      border-bottom: none;
      margin-top: 1rem;
      padding-top: 1rem;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .calc-result {
      color: var(--success);
    }

    /* Signals */
    .signals-container {
      max-width: 700px;
      width: 100%;
    }

    .signal-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1rem;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    .signal-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .signal-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .signal-direction {
      font-size: 1.5rem;
    }

    .signal-direction.up { color: var(--success); }
    .signal-direction.down { color: var(--error); }

    .signal-text {
      font-size: 1rem;
      flex: 1;
    }

    .signal-effect {
      margin-top: 0.5rem;
      padding-left: 2.25rem;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* Interactive */
    .interactive-container {
      max-width: 700px;
      width: 100%;
    }

    .signal-selector {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .signal-btn {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }

    .signal-btn:hover {
      border-color: var(--accent-primary);
    }

    .signal-btn.active {
      background: var(--accent-primary);
      border-color: var(--accent-primary);
      color: white;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 2rem;
      align-items: start;
    }

    .comparison-col {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
    }

    .comparison-col h3 {
      text-align: center;
      margin-bottom: 1rem;
      color: var(--text-muted);
      font-weight: 400;
    }

    .arrow-col {
      display: flex;
      align-items: center;
      font-size: 2rem;
      color: var(--accent-primary);
      padding-top: 3rem;
    }

    .comparison-row {
      display: flex;
      justify-content: space-between;
      padding: 0.4rem 0;
      font-size: 0.95rem;
    }

    .comparison-row.changed-up {
      color: var(--success);
    }

    .comparison-row.changed-down {
      color: var(--error);
    }

    .comparison-total {
      border-top: 1px solid var(--border);
      margin-top: 0.5rem;
      padding-top: 0.5rem;
      font-weight: 600;
    }

    /* CTA */
    #cta {
      background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    }

    .cta-steps {
      max-width: 400px;
      text-align: left;
      margin-top: 2rem;
    }

    .cta-step {
      font-size: 1.1rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
      padding-left: 1.5rem;
      position: relative;
    }

    .cta-step::before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--accent-primary);
    }

    .explore-btn {
      display: inline-block;
      margin-top: 2.5rem;
      padding: 1rem 2rem;
      background: var(--accent-gradient);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1.1rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .explore-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 122, 204, 0.3);
    }

    .explore-desc {
      margin-top: 0.75rem;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* Giant CTA button */
    .explore-btn-giant {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem 6rem;
      background: var(--accent-gradient);
      color: white;
      text-decoration: none;
      border-radius: 20px;
      font-weight: 700;
      font-size: 2.5rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 10px 40px rgba(0, 122, 204, 0.4);
      text-align: center;
    }

    .explore-btn-giant:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 60px rgba(0, 122, 204, 0.5);
    }

    .explore-btn-giant:active {
      transform: translateY(-2px) scale(0.98);
    }

    /* Questions grid */
    .questions-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      max-width: 700px;
      margin-bottom: 2rem;
    }

    .question-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      font-size: 1rem;
      color: var(--text-primary);
      transition: all 0.3s ease;
    }

    .question-card:hover {
      border-color: var(--accent-primary);
      transform: translateY(-2px);
    }

    /* Diverge visualization */
    .diverge-visual {
      display: flex;
      align-items: center;
      gap: 2rem;
      max-width: 800px;
      margin: 2rem 0;
    }

    .diverge-question {
      background: var(--node-ultimate-bg);
      color: var(--node-ultimate-text);
      padding: 1.5rem 2rem;
      border-radius: 12px;
      font-weight: 500;
      font-size: 1.1rem;
      white-space: nowrap;
    }

    .diverge-arrow {
      font-size: 2rem;
      color: var(--text-muted);
    }

    .diverge-scenarios {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .mini-scenario {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      transition: all 0.2s ease;
    }

    .mini-scenario:hover {
      border-color: var(--accent-primary);
    }

    /* Cluster flow visualization */
    .cluster-flow {
      display: flex;
      align-items: stretch;
      gap: 0;
      max-width: 900px;
      width: 100%;
      margin: 2rem 0;
    }

    .raw-scenarios-col {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 0 0 200px;
    }

    .raw-scenario {
      padding: 0.6rem 1rem;
      border-radius: 6px;
      font-size: 0.85rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      color: var(--text-secondary);
    }

    .raw-scenario.cluster-ai { border-left: 3px solid var(--scenario-ai); }
    .raw-scenario.cluster-green { border-left: 3px solid var(--scenario-green); }
    .raw-scenario.cluster-frag { border-left: 3px solid var(--scenario-frag); }
    .raw-scenario.cluster-steady { border-left: 3px solid var(--scenario-steady); }

    .cluster-arrows {
      flex: 0 0 120px;
      min-height: 400px;
    }

    .cluster-arrows svg {
      width: 100%;
      height: 100%;
    }

    .cluster-line {
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      transition: stroke-dashoffset 0.6s ease;
    }

    .cluster-line.visible {
      stroke-dashoffset: 0;
    }

    .global-scenarios-col {
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      gap: 1rem;
      flex: 0 0 180px;
    }

    .global-scenario {
      padding: 1.25rem 1.5rem;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      text-align: center;
    }

    .global-scenario.scenario-ai-card {
      background: var(--scenario-ai-bg);
      border: 2px solid var(--scenario-ai);
      color: var(--scenario-ai);
    }

    .global-scenario.scenario-green-card {
      background: var(--scenario-green-bg);
      border: 2px solid var(--scenario-green);
      color: var(--scenario-green);
    }

    .global-scenario.scenario-frag-card {
      background: var(--scenario-frag-bg);
      border: 2px solid var(--scenario-frag);
      color: var(--scenario-frag);
    }

    .global-scenario.scenario-steady-card {
      background: var(--scenario-steady-bg);
      border: 2px solid var(--scenario-steady);
      color: var(--scenario-steady);
    }

    /* Probability container */
    .probability-container {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 500px;
      width: 100%;
      margin: 2rem 0;
    }

    .prob-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.5s ease;
    }

    .prob-card.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .prob-label {
      min-width: 140px;
      font-weight: 500;
    }

    .prob-bar-bg {
      flex: 1;
      height: 24px;
      background: var(--bg-tertiary);
      border-radius: 12px;
      overflow: hidden;
    }

    .prob-bar {
      height: 100%;
      border-radius: 12px;
      transition: width 0.8s ease;
    }

    .scenario-ai-card .prob-bar { background: var(--scenario-ai); }
    .scenario-green-card .prob-bar { background: var(--scenario-green); }
    .scenario-steady-card .prob-bar { background: var(--scenario-steady); }
    .scenario-frag-card .prob-bar { background: var(--scenario-frag); }

    .scenario-ai-card .prob-label { color: var(--scenario-ai); }
    .scenario-green-card .prob-label { color: var(--scenario-green); }
    .scenario-steady-card .prob-label { color: var(--scenario-steady); }
    .scenario-frag-card .prob-label { color: var(--scenario-frag); }

    .prob-value {
      min-width: 50px;
      text-align: right;
      font-weight: 600;
      color: var(--text-secondary);
    }

    /* Forecast matrix */
    .matrix-container {
      max-width: 700px;
      width: 100%;
      margin: 2rem 0;
      overflow-x: auto;
    }

    .forecast-matrix {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-secondary);
      border-radius: 12px;
      overflow: hidden;
    }

    .forecast-matrix th,
    .forecast-matrix td {
      padding: 0.75rem 1rem;
      text-align: center;
      border-bottom: 1px solid var(--bg-tertiary);
    }

    .forecast-matrix th {
      background: var(--bg-tertiary);
      font-weight: 500;
      font-size: 0.85rem;
    }

    .forecast-matrix .question-cell {
      text-align: left;
      font-weight: 500;
      color: var(--text-primary);
    }

    .forecast-matrix .scenario-col.ai { color: var(--scenario-ai); }
    .forecast-matrix .scenario-col.green { color: var(--scenario-green); }
    .forecast-matrix .scenario-col.steady { color: var(--scenario-steady); }
    .forecast-matrix .scenario-col.frag { color: var(--scenario-frag); }

    .forecast-matrix .weighted-col {
      background: var(--bg-tertiary);
      font-weight: 600;
    }

    .forecast-matrix .weighted-cell {
      font-weight: 600;
      color: var(--accent-primary);
    }

    .matrix-row {
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.4s ease;
    }

    .matrix-row.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Scroll indicator */
    .scroll-indicator {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      color: var(--text-muted);
      font-size: 0.9rem;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
      40% { transform: translateX(-50%) translateY(-10px); }
      60% { transform: translateX(-50%) translateY(-5px); }
    }

    .scroll-indicator.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Progress bar */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: var(--accent-gradient);
      width: 0%;
      z-index: 1000;
      transition: width 0.1s ease;
    }
  </style>
</head>
<body>

  <div class="progress-bar" id="progress"></div>

  <div class="question-header" id="question-header">
    <div class="question-header-text">
      <strong>The Tree of Life</strong> — How we build forecasts
    </div>
  </div>

  <!-- Section 1: Hero -->
  <section id="hero">
    <h1>The Tree of Life</h1>
  </section>

  <!-- Section 2: Questions -->
  <section id="questions">
    <h2>We start with questions we want to forecast</h2>
    <div class="questions-grid">
      <div class="question-card">US GDP in 2050?</div>
      <div class="question-card">Global temperature rise?</div>
      <div class="question-card">AI capabilities by 2030?</div>
      <div class="question-card">Renewable energy adoption?</div>
      <div class="question-card">Geopolitical stability?</div>
      <div class="question-card">Population in 2050?</div>
    </div>
    <p class="subtitle">These questions can be as big or as small as we like, as related or unrelated to one another as we like.</p>
  </section>

  <!-- Section 3: Diverge -->
  <section id="diverge">
    <h2>For each question, we imagine many scenarios that might affect its outcome:</h2>
    <div class="diverge-visual">
      <div class="diverge-question">US GDP 2050?</div>
      <div class="diverge-arrow">→</div>
      <div class="diverge-scenarios">
        <div class="mini-scenario">AI boom drives productivity</div>
        <div class="mini-scenario">Green transition reshapes economy</div>
        <div class="mini-scenario">Climate shocks disrupt growth</div>
        <div class="mini-scenario">Trade fragmentation</div>
        <div class="mini-scenario">Steady continuation of trends</div>
      </div>
    </div>
    <p class="subtitle" style="margin-top: 2rem;">20 questions × 5 scenarios each = 100 raw scenario descriptions</p>
  </section>

  <!-- Section 4: Converge -->
  <section id="converge">
    <h2>Now, these 100 scenarios aren't all independent. They naturally cluster:</h2>
    <div class="cluster-flow">
      <!-- Left: Raw scenarios -->
      <div class="raw-scenarios-col">
        <div class="raw-scenario cluster-ai">AI boom (GDP)</div>
        <div class="raw-scenario cluster-ai">Rapid AI progress</div>
        <div class="raw-scenario cluster-ai">AI-driven temp</div>
        <div class="raw-scenario cluster-green">Green GDP</div>
        <div class="raw-scenario cluster-green">Low temp rise</div>
        <div class="raw-scenario cluster-green">High renewables</div>
        <div class="raw-scenario cluster-frag">Trade collapse</div>
        <div class="raw-scenario cluster-frag">High conflict</div>
        <div class="raw-scenario cluster-steady">Steady GDP</div>
        <div class="raw-scenario cluster-steady">Gradual change</div>
      </div>
      <!-- Middle: Arrows -->
      <div class="cluster-arrows">
        <svg viewBox="0 0 120 400" preserveAspectRatio="none">
          <defs>
            <marker id="arrow-ai" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
              <path d="M0,0 L8,4 L0,8 Z" fill="var(--scenario-ai)"/>
            </marker>
            <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
              <path d="M0,0 L8,4 L0,8 Z" fill="var(--scenario-green)"/>
            </marker>
            <marker id="arrow-frag" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
              <path d="M0,0 L8,4 L0,8 Z" fill="var(--scenario-frag)"/>
            </marker>
            <marker id="arrow-steady" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
              <path d="M0,0 L8,4 L0,8 Z" fill="var(--scenario-steady)"/>
            </marker>
          </defs>
          <!-- AI cluster arrows -->
          <line x1="0" y1="20" x2="110" y2="50" stroke="var(--scenario-ai)" stroke-width="2" marker-end="url(#arrow-ai)" class="cluster-line"/>
          <line x1="0" y1="60" x2="110" y2="50" stroke="var(--scenario-ai)" stroke-width="2" marker-end="url(#arrow-ai)" class="cluster-line"/>
          <line x1="0" y1="100" x2="110" y2="50" stroke="var(--scenario-ai)" stroke-width="2" marker-end="url(#arrow-ai)" class="cluster-line"/>
          <!-- Green cluster arrows -->
          <line x1="0" y1="140" x2="110" y2="150" stroke="var(--scenario-green)" stroke-width="2" marker-end="url(#arrow-green)" class="cluster-line"/>
          <line x1="0" y1="180" x2="110" y2="150" stroke="var(--scenario-green)" stroke-width="2" marker-end="url(#arrow-green)" class="cluster-line"/>
          <line x1="0" y1="220" x2="110" y2="150" stroke="var(--scenario-green)" stroke-width="2" marker-end="url(#arrow-green)" class="cluster-line"/>
          <!-- Frag cluster arrows -->
          <line x1="0" y1="260" x2="110" y2="270" stroke="var(--scenario-frag)" stroke-width="2" marker-end="url(#arrow-frag)" class="cluster-line"/>
          <line x1="0" y1="300" x2="110" y2="270" stroke="var(--scenario-frag)" stroke-width="2" marker-end="url(#arrow-frag)" class="cluster-line"/>
          <!-- Steady cluster arrows -->
          <line x1="0" y1="340" x2="110" y2="360" stroke="var(--scenario-steady)" stroke-width="2" marker-end="url(#arrow-steady)" class="cluster-line"/>
          <line x1="0" y1="380" x2="110" y2="360" stroke="var(--scenario-steady)" stroke-width="2" marker-end="url(#arrow-steady)" class="cluster-line"/>
        </svg>
      </div>
      <!-- Right: Global scenarios -->
      <div class="global-scenarios-col">
        <div class="global-scenario scenario-ai-card">AI Acceleration</div>
        <div class="global-scenario scenario-green-card">Green Transition</div>
        <div class="global-scenario scenario-frag-card">Fragmented World</div>
        <div class="global-scenario scenario-steady-card">Steady Progress</div>
      </div>
    </div>
    <p class="subtitle">100 raw scenarios → ~20 global scenarios that hang together</p>
  </section>

  <!-- Section 5: Structure & Quantify -->
  <section id="quantify">
    <h2>We structure scenarios into pairwise relationships and forecast the probability of each one.</h2>
    <div class="probability-container">
      <div class="prob-card scenario-ai-card" style="transition-delay: 0.1s;">
        <div class="prob-label">AI Acceleration</div>
        <div class="prob-bar-bg"><div class="prob-bar" style="width: 35%;"></div></div>
        <div class="prob-value">35%</div>
      </div>
      <div class="prob-card scenario-green-card" style="transition-delay: 0.2s;">
        <div class="prob-label">Green Transition</div>
        <div class="prob-bar-bg"><div class="prob-bar" style="width: 25%;"></div></div>
        <div class="prob-value">25%</div>
      </div>
      <div class="prob-card scenario-steady-card" style="transition-delay: 0.3s;">
        <div class="prob-label">Steady Progress</div>
        <div class="prob-bar-bg"><div class="prob-bar" style="width: 25%;"></div></div>
        <div class="prob-value">25%</div>
      </div>
      <div class="prob-card scenario-frag-card" style="transition-delay: 0.4s;">
        <div class="prob-label">Fragmented World</div>
        <div class="prob-bar-bg"><div class="prob-bar" style="width: 15%;"></div></div>
        <div class="prob-value">15%</div>
      </div>
    </div>
    <p class="subtitle">We identify pairwise relationships between each scenario (orthogonal, correlated, hierarchical, mutually exclusive). We use these relationships to assign a probability to each one. Probabilities must sum to 100%</p>
  </section>

  <!-- Section 6: Condition -->
  <section id="condition">
    <h2>Then, for each (question, scenario) pair, we ask: "If this scenario occurs, what's the forecast?"</h2>
    <div class="matrix-container">
      <table class="forecast-matrix">
        <thead>
          <tr>
            <th></th>
            <th class="scenario-col ai">AI Accel</th>
            <th class="scenario-col green">Green</th>
            <th class="scenario-col steady">Steady</th>
            <th class="scenario-col frag">Fragment</th>
            <th class="weighted-col">Weighted</th>
          </tr>
        </thead>
        <tbody>
          <tr class="matrix-row" style="transition-delay: 0.1s;">
            <td class="question-cell">US GDP 2050?</td>
            <td>$58T</td>
            <td>$52T</td>
            <td>$47T</td>
            <td>$38T</td>
            <td class="weighted-cell">$49.8T</td>
          </tr>
          <tr class="matrix-row" style="transition-delay: 0.2s;">
            <td class="question-cell">Temp rise?</td>
            <td>+2.8°C</td>
            <td>+1.5°C</td>
            <td>+2.2°C</td>
            <td>+3.1°C</td>
            <td class="weighted-cell">+2.3°C</td>
          </tr>
          <tr class="matrix-row" style="transition-delay: 0.3s;">
            <td class="question-cell">Renewable %?</td>
            <td>45%</td>
            <td>80%</td>
            <td>55%</td>
            <td>35%</td>
            <td class="weighted-cell">53%</td>
          </tr>
          <tr class="matrix-row" style="transition-delay: 0.4s;">
            <td class="question-cell">AI level?</td>
            <td>AGI</td>
            <td>Narrow</td>
            <td>Strong</td>
            <td>Limited</td>
            <td class="weighted-cell">—</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="subtitle">Our forecast = weighted average across all scenarios. We check if numbers violate declared directions.</p>
  </section>

  <!-- Section 7: Signals -->
  <section id="signals">
    <h2>Finally, from each scenario, we extract <b>signals</b>—resolvable forecasting questions.</h2>
    <div class="signals-container">
      <div class="signal-card" style="transition-delay: 0.1s;">
        <div class="signal-header">
          <span class="signal-direction up">&#x25B2;</span>
          <span class="signal-text">AI reaches human-level cognitive performance by 2032-2035</span>
        </div>
        <div class="signal-effect">AI Revolution ↑↑ | Steady ↓</div>
      </div>
      <div class="signal-card" style="transition-delay: 0.2s;">
        <div class="signal-header">
          <span class="signal-direction down">&#x25BC;</span>
          <span class="signal-text">US-China decoupling escalates to sustained economic split</span>
        </div>
        <div class="signal-effect">Fragmentation ↑↑ | AI Revolution ↓</div>
      </div>
      <div class="signal-card" style="transition-delay: 0.3s;">
        <div class="signal-header">
          <span class="signal-direction down">&#x25BC;</span>
          <span class="signal-text">Multiple climate tipping points activate</span>
        </div>
        <div class="signal-effect">Climate Breakdown ↑↑ | Green Transition ↓</div>
      </div>
      <div class="signal-card" style="transition-delay: 0.4s;">
        <div class="signal-header">
          <span class="signal-direction up">&#x25B2;</span>
          <span class="signal-text">Carbon pricing reaches $150-200/ton by 2035</span>
        </div>
        <div class="signal-effect">Green Transition ↑↑ | Steady ↓</div>
      </div>
    </div>
    <p class="subtitle">These signals update in real-time: from forecasting tournaments, prediction markets, etc. As these forecasts update, we update our probability of which world we're entering.</p>
  </section>

  <!-- Section 8: Dynamic Updates -->
  <section id="interactive">
    <h2>Explore what happens when signals resolve:</h2>
    <div class="interactive-container">
      <div class="signal-selector">
        <button class="signal-btn active" data-signal="agi-arrives">AGI by 2035</button>
        <button class="signal-btn" data-signal="us-china-split">US-China split</button>
        <button class="signal-btn" data-signal="tipping-points">Tipping points</button>
      </div>

      <div class="comparison">
        <div class="comparison-col" id="before-col">
          <h3>Current</h3>
          <div class="comparison-row"><span>Steady</span><span>13%</span></div>
          <div class="comparison-row"><span>AI Revolution</span><span>11%</span></div>
          <div class="comparison-row"><span>Fragmentation</span><span>10%</span></div>
          <div class="comparison-row"><span>Green</span><span>9%</span></div>
          <div class="comparison-row"><span>Climate</span><span>8%</span></div>
          <div class="comparison-row comparison-total"><span>E[GDP]</span><span>$45.3T</span></div>
        </div>

        <div class="arrow-col">→</div>

        <div class="comparison-col" id="after-col">
          <h3>After Signal</h3>
          <div class="comparison-row" id="after-steady"><span>Steady</span><span>13%</span></div>
          <div class="comparison-row" id="after-ai"><span>AI Revolution</span><span>11%</span></div>
          <div class="comparison-row" id="after-frag"><span>Fragmentation</span><span>10%</span></div>
          <div class="comparison-row" id="after-green"><span>Green</span><span>9%</span></div>
          <div class="comparison-row" id="after-climate"><span>Climate</span><span>8%</span></div>
          <div class="comparison-row comparison-total" id="after-total"><span>E[GDP]</span><span>$45.3T</span></div>
        </div>
      </div>
    </div>
    <p class="subtitle" style="margin-top: 2rem;">The Tree of Life is a living scenario planning tool—grounded in tractable, resolvable forecasts.</p>
  </section>

  <!-- Section 9: CTA -->
  <section id="cta">
    <a href="explorer.html" class="explore-btn-giant">Explore the Full Tree</a>
  </section>

  <div class="scroll-indicator">↓ Scroll</div>

  <script>
    // Progress bar
    window.addEventListener('scroll', () => {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById('progress').style.width = scrolled + '%';
    });

    // Sticky header visibility
    const heroSection = document.getElementById('hero');
    const questionHeader = document.getElementById('question-header');

    const headerObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) {
          questionHeader.classList.add('visible');
        } else {
          questionHeader.classList.remove('visible');
        }
      });
    }, { threshold: 0.5 });

    headerObserver.observe(heroSection);

    // Section visibility observer
    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');

          // Trigger child animations
          const children = entry.target.querySelectorAll('.outcome-row, .signal-card, .calc-row, .prob-card, .matrix-row');
          children.forEach((child, i) => {
            setTimeout(() => child.classList.add('visible'), i * 100);
          });
        }
      });
    }, { threshold: 0.3 });

    document.querySelectorAll('section').forEach(section => {
      sectionObserver.observe(section);
    });

    // Tree animation observer
    const treeObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const container = entry.target;

          // Animate nodes
          const nodes = container.querySelectorAll('.node:not(.l2)');
          nodes.forEach((node, i) => {
            setTimeout(() => node.classList.add('visible'), i * 200);
          });

          // Animate lines
          const lines = container.querySelectorAll('.tree-line:not(.l2)');
          lines.forEach((line, i) => {
            setTimeout(() => line.classList.add('visible'), 300 + i * 150);
          });

          // Animate level 2 (if present)
          setTimeout(() => {
            const l2Nodes = container.querySelectorAll('.node.l2');
            l2Nodes.forEach((node, i) => {
              setTimeout(() => node.classList.add('visible'), i * 80);
            });

            const l2Lines = container.querySelectorAll('.tree-line.l2');
            l2Lines.forEach((line, i) => {
              setTimeout(() => line.classList.add('visible'), i * 80);
            });
          }, 600);

          // Animate scenario labels (for clustering section)
          setTimeout(() => {
            const labels = container.querySelectorAll('.scenario-label');
            labels.forEach((label, i) => {
              setTimeout(() => {
                label.classList.add('visible');
              }, i * 400);
            });
          }, 1200);
        }
      });
    }, { threshold: 0.4 });

    document.querySelectorAll('.tree-container').forEach(tree => {
      treeObserver.observe(tree);
    });

    // Cluster flow animation observer
    const clusterObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const lines = entry.target.querySelectorAll('.cluster-line');
          lines.forEach((line, i) => {
            setTimeout(() => line.classList.add('visible'), i * 80);
          });
        }
      });
    }, { threshold: 0.3 });

    document.querySelectorAll('.cluster-flow').forEach(flow => {
      clusterObserver.observe(flow);
    });

    // Hide scroll indicator
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        document.querySelector('.scroll-indicator').classList.add('hidden');
      }
    }, { once: true });

    // Signal selector
    const signalEffects = {
      'none': { steady: 13, ai: 11, frag: 10, green: 9, climate: 8, gdp: 45.3 },
      'agi-arrives': { steady: 8, ai: 22, frag: 8, green: 10, climate: 6, gdp: 48.1 },
      'us-china-split': { steady: 10, ai: 8, frag: 18, green: 7, climate: 9, gdp: 42.8 },
      'tipping-points': { steady: 8, ai: 9, frag: 12, green: 6, climate: 16, gdp: 41.2 }
    };

    const applySignalEffect = (signal) => {
      const effects = signalEffects[signal];
      const baseline = signalEffects['none'];

      const updateRow = (id, key) => {
        const row = document.getElementById(id);
        const span = row.querySelector('span:last-child');
        span.textContent = effects[key] + '%';
        row.classList.remove('changed-up', 'changed-down');
        if (effects[key] > baseline[key]) {
          row.classList.add('changed-up');
        } else if (effects[key] < baseline[key]) {
          row.classList.add('changed-down');
        }
      };

      updateRow('after-steady', 'steady');
      updateRow('after-ai', 'ai');
      updateRow('after-frag', 'frag');
      updateRow('after-green', 'green');
      updateRow('after-climate', 'climate');

      const totalRow = document.getElementById('after-total');
      totalRow.querySelector('span:last-child').textContent = '$' + effects.gdp + 'T';
      totalRow.classList.remove('changed-up', 'changed-down');
      if (effects.gdp > baseline.gdp) {
        totalRow.classList.add('changed-up');
      } else if (effects.gdp < baseline.gdp) {
        totalRow.classList.add('changed-down');
      }
    };

    document.querySelectorAll('.signal-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.signal-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        applySignalEffect(btn.dataset.signal);
      });
    });

    // Initialize with first signal selected
    applySignalEffect('agi-arrives');
  </script>
</body>
</html>
